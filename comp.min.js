"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Comp=function(){function Comp(){_classCallCheck(this,Comp),this.components={}}// createRecorder(actions, view = ()=>{}) {
//     let path = window.location.pathname;
//     let model = {
//         pageLoadTimestamp: Date.now(),
//         steps: [],
//         components: {},
//         recording: true,
//         sessionName: path.substr(1, path.indexOf('.')-1).split('/').join('_')
//     };
//     this.recorder = new Component("recorder", actions, view, model);
// }
return _createClass(Comp,[{key:"create",value:function create(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};this.components[a]=new Component(a,b,c,d)}}]),Comp}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Component=function(){function Component(a,b,c,d){if(_classCallCheck(this,Component),null==a||""===a)throw new Error("Your component needs a name");if(null==b)throw new Error(a+" needs some actions! Here's an example of an Actions function:\r\n\r\n// It must be a function that takes a model and returns an object of functions, e.g.\r\n\r\nYourComponent.Actions = function (model) {\r\n    return {\r\n        sayHello: function () { console.log('Hi.'); },\r\n        greet: function (name) { console.log('Hello, ' + name); }\r\n    }\r\n}\r\n\r\n");this.componentName=a;var f=c&&c(),g=f&&f.init?f.init:function(){},h=f&&f.render?f.render:function(){};Object.assign(this,this.componentize(b(d),h,d)),g(this,d)}return _createClass(Component,[{key:"componentize",value:function componentize(a,b,c){var _this=this,d=b(c),f=d;"undefined"!=typeof document&&d&&(document.querySelector("[data-component="+this.componentName+"]").innerHTML=d);var g={};return Object.keys(a).map(function(h){g[h]=function(){for(var _len=arguments.length,j=Array(_len),_key=0;_key<_len;_key++)j[_key]=arguments[_key];var k=a[h].apply(a,j);// if (componentizer.recorder && componentName !== "recorder" && componentizer.recorder.get("recording")) {
//     componentizer.recorder.recordStep(componentName, model, action, args);
// }
k&&k.then&&_this.handlePromise(k,b),d=b(c),"undefined"!=typeof document&&d&&d!==f&&(document.querySelector("[data-component="+_this.componentName+"]").innerHTML=d,f=d)}},this),g.get=function(h){return c[h]},"undefined"!=typeof document&&this.registerEventDelegation(this.componentName,g),g}},{key:"handlePromise",value:function handlePromise(a,b){a.then(function(c){if(null==c)throw new Error("No model received: aborting render");b(c)}).catch(function(c){"string"==typeof c?console.error(c):console.error("Error unhandled by component. Add a catch handler to your AJAX method.")})}},{key:"registerEventDelegation",value:function registerEventDelegation(a,b){var c=document.querySelector("[data-component="+a+"]");null===c||Object.keys(Event.prototype).map(function(d,f){var _this2=this;10<=f&&19>=f&&c.addEventListener(d.toLowerCase(),function(g){var h=_this2.getTarget(g),j=_this2.getAction(g,h);null==b[j.name]||(""===j.args?b[j.name]():b[j.name].apply(j,j.args))})},this)}},{key:"getTarget",value:function getTarget(a){return a=a||window.event,a.target||a.srcElement}},{key:"getAction",value:function getAction(a,b){var c=b.dataset[a.type]||"";return{name:this.getActionName(c),args:this.extractArgs(c,b)}}},{key:"getActionName",value:function getActionName(a){var b=a.match(/[^(]*/);return b?b[0]:""}},{key:"extractArgs",value:function extractArgs(a,b){var c=/\(\s*([^)]+?)\s*\)/.exec(a);return c&&null!=c[1]?(c=c[1].split(/\s*,\s*/).map(function(d){return d.match(/(value)/)?this.value:d},b),c):""}}]),Component}();var comp=new Comp;"undefined"==typeof exports||exports.nodeType?window.comp=comp:"undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=comp);

//# sourceMappingURL=comp.min.js.map